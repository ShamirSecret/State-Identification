{"version":3,"file":"static/js/84.d5dab4f0.chunk.js","mappings":"iMA4HA,QAtHA,WAEI,MAAM,EAACA,EAAC,KAAEC,IAAQC,EAAAA,EAAAA,OACXC,EAAOC,IAAYC,EAAAA,EAAAA,MACpB,QAACC,GAAWC,EAAAA,EAAIC,UACfC,EAAMC,IAAWC,EAAAA,EAAAA,UAAc,KAC/BC,EAAMC,IAAWF,EAAAA,EAAAA,UAAc,IAgCtC,IAAIG,GAAS,EAoBb,OAlBAC,EAAAA,EAAAA,YAAU,KAENC,iBACSF,IAnCGE,WACZ,UACUC,EAAAA,EAAQC,IAAI,qBAAqBC,MAAKC,IACnB,KAAjBA,EAAIC,KAAKC,KACTZ,EAAQU,EAAIC,KAAKA,MAEjBf,EAAQiB,MAAMH,EAAIC,KAAKf,QAC3B,GAER,CAAE,MAAOiB,GACLC,QAAQC,IAAIF,EAChB,GAyBQG,GArBIV,WACZ,UACUC,EAAAA,EAAQC,IAAI,oBAAoBC,MAAKC,IAClB,KAAjBA,EAAIC,KAAKC,KACTT,EAAQO,EAAIC,KAAKA,MAEjBf,EAAQiB,MAAMH,EAAIC,KAAKf,QAC3B,GAER,CAAE,MAAOiB,GACLC,QAAQC,IAAIF,EAChB,GAWQI,GAER,CAEAC,GAEO,KACHd,GAAS,CAAI,IAGd,KAIHe,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qCAAoCC,SAAA,EAC/CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,eAAcC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,SACzB/B,EAAE,YAEPgC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,eAAcC,SACxBtB,GACGA,EAAKwB,OAAS,GACdxB,EAAKyB,KAAI,CAACC,EAAWC,KACjBP,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC1BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,cAAaC,SAAA,EACxBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,MAAKC,SAAEK,EAAQ,KAC9BJ,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,UAC3BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,cAAaC,SACvBI,EAAKE,SAASJ,OAAS,GAClBE,EAAKE,SAASC,MAAM,EAAG,GAAK,MAAQH,EAAKE,SAASC,OAAO,GACzDH,EAAKE,iBAKvBR,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,CAC1BI,EAAKI,OAAOC,QAAQ,GAAG,IAAExC,EAAE,kBAbAoC,WAmBpDP,EAAAA,EAAAA,MAAA,OAAKC,UAAU,eAAcC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,SACzB/B,EAAE,YAEPgC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,eAAcC,SACxBnB,GACGA,EAAKqB,OAAS,GACdrB,EAAKsB,KAAI,CAACC,EAAWC,KACjBP,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC1BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,cAAaC,SAAA,EACxBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,MAAKC,SAAEK,EAAQ,KAC9BJ,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,UAC3BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,cAAaC,SACvBI,EAAKE,SAASJ,OAAS,GAClBE,EAAKE,SAASC,MAAM,EAAG,GAAK,MAAQH,EAAKE,SAASC,OAAO,GACzDH,EAAKE,iBAKvBR,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,CAC1BI,EAAKM,MAAM,IAAEzC,EAAE,aAbYoC,YAqBhE,C","sources":["pages/rank/index.tsx"],"sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {App} from 'antd';\nimport {useStore} from '../../utils/store'\nimport {request} from '../../api/request'\n\nfunction Rank() {\n\n    const {t, i18n} = useTranslation();\n    const [state, dispatch] = useStore();\n    const {message} = App.useApp()\n    const [rank, setRank] = useState<any>([]);\n    const [like, setLike] = useState<any>([]);\n\n    const getRank = async () => {\n        try {\n            await request.get('/getpointsranking').then(res => {\n                if (res.data.code == 200) {\n                    setRank(res.data.data)\n                } else {\n                    message.error(res.data.message)\n                }\n            })\n        } catch (error) {\n            console.log(error)\n        }\n\n    }\n\n    const getLike = async () => {\n        try {\n            await request.get('/getlikesranking').then(res => {\n                if (res.data.code == 200) {\n                    setLike(res.data.data)\n                } else {\n                    message.error(res.data.message)\n                }\n            })\n        } catch (error) {\n            console.log(error)\n        }\n\n    }\n\n    let ignore = false;\n\n    useEffect(() => {\n\n        async function startFetching() {\n            if (!ignore) {\n                getRank()\n                getLike()\n            }\n        }\n\n        startFetching();\n\n        return () => {\n            ignore = true;\n        };\n\n        }, []);\n\n\n    return (\n        <div className=\"index-content home-content-ranking\">\n            <div className=\"home-ranking\">\n                <div className=\"ranking-title\">\n                    {t('Prank')}\n                </div>\n                <div className=\"ranking-list\">\n                    {rank &&\n                        rank.length > 0 &&\n                        rank.map((item: any, index: number) => (\n                            <div className=\"ranking-items\" key={index}>\n                                <div className=\"ranking-num\">\n                                    <div className=\"num\">{index + 1}</div>\n                                    <div className=\"ranking-people\">\n                                        <div className=\"information\">\n                                            {item.username.length > 18\n                                                ? item.username.slice(0, 8) + \"...\" + item.username.slice(-7)\n                                                : item.username\n                                            }\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"ranking-number\">\n                                    {item.points.toFixed(2)} {t('integrals')}\n                                </div>\n                            </div>\n                            ))}\n                </div>\n            </div>\n            <div className=\"home-ranking\">\n                <div className=\"ranking-title\">\n                    {t('Lrank')}\n                </div>\n                <div className=\"ranking-list\">\n                    {like &&\n                        like.length > 0 &&\n                        like.map((item: any, index: number) => (\n                            <div className=\"ranking-items\" key={index}>\n                                <div className=\"ranking-num\">\n                                    <div className=\"num\">{index + 1}</div>\n                                    <div className=\"ranking-people\">\n                                        <div className=\"information\">\n                                            {item.username.length > 18\n                                                ? item.username.slice(0, 8) + \"...\" + item.username.slice(-7)\n                                                : item.username\n                                            }\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"ranking-number\">\n                                    {item.likes} {t('like')}\n                                </div>\n                            </div>\n                            ))}\n                </div>\n            </div>\n        </div>\n        )\n}\n\nexport default Rank;"],"names":["t","i18n","useTranslation","state","dispatch","useStore","message","App","useApp","rank","setRank","useState","like","setLike","ignore","useEffect","async","request","get","then","res","data","code","error","console","log","getRank","getLike","startFetching","_jsxs","className","children","_jsx","length","map","item","index","username","slice","points","toFixed","likes"],"sourceRoot":""}