"use strict";(self.webpackChunknew_picwe=self.webpackChunknew_picwe||[]).push([[476],{1476:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(2791),n=s(9230),r=s(7689),o=s(1991),i=s(8926),c=s(5533),l=s(8126),d=s(8526),h=s(959),u=s(8737),p=s(6528),m=s(2641),f=s(8598),g=s(184);function x(e){const{t:t,i18n:s}=(0,n.$G)();let{operDialogOpen:r,visiable:x,chain:j}=e;const{width:y,height:w}=(0,f.Z)(),[_,v]=(0,a.useState)([]),[k,Z]=(0,a.useState)(5),[C,b]=(0,i.o)(),[S,$]=(0,a.useState)(!1),{message:F,modal:N}=c.Z.useApp(),[I,D]=(0,a.useState)(!1),[E]=d.Z.useForm(),W=(e,s)=>{N.success({title:`${t("STransaction")}`,content:(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{onClick:()=>(e=>{window.open(C.openUrl+e,"_blank")})(e),className:"get-href",children:t("clickquery")}),(0,g.jsxs)("p",{children:[t("EwaitingTime"),s]})]}),onOk(){}})},P=async e=>{try{e.chain=j,await o.W.post("/state/approve_point_token",e).then((s=>{200==s.data.code?"\u989d\u5ea6\u8db3\u591f"==s.data.message?q(e):(v((e=>{const t=[...e];return t[0]=!1,t})),F.warning(`${t("Youneedauthorization")}`),setTimeout((()=>{W(s.data.data.transaction_hash,s.data.data.estimated_confirmation_time),r(!1)}),3e3)):F.error(`${t("operationfailed")}`)}))}catch(s){v((e=>{const t=[...e];return t[0]=!1,t})),F.error(`${t("operationfailed")}`)}},q=async e=>{try{await o.W.post("/state/open_channel",e).then((e=>{v((e=>{const t=[...e];return t[0]=!1,t})),200!=e.data.code?F.error(e.data.message):(W(e.data.data.transaction_hash,e.data.data.estimated_confirmation_time),r(!1))}))}catch(s){v((e=>{const t=[...e];return t[0]=!1,t})),F.error(`${t("operationfailed")}`)}},O=async e=>{try{const t=new FormData;t.append("encrypted_share_1",e),await o.W.post("/wallet/put_share_1_to_cookie",t).then((e=>{200!=e.data.code?F.error(e.data.message):$(!0)}))}catch(t){console.log(t)}};(0,a.useEffect)((()=>{D(x)}),[x]);let V=!1;return(0,a.useEffect)((()=>(async function(){V||(1==x&&(async()=>{try{await o.W.get("/wallet/check_share_1").then((e=>{200!=e.data.code?($(!1),E.setFieldsValue({chipkey:""})):($(!0),E.setFieldsValue({chipkey:"true"}))}))}catch(e){console.log(e)}})(),Z(y>767?5:0))}(),()=>{V=!0})),[y,x]),(0,g.jsx)(h.Z,{title:t("openachannel"),open:I,onCancel:()=>{r(!1)},footer:[],children:(0,g.jsxs)(d.Z,{name:"openorder",labelCol:{span:5},wrapperCol:{span:16},style:{maxWidth:600},onFinish:async e=>{v((e=>{const t=[...e];return t[0]=!0,t})),P(e)},onFinishFailed:e=>{},autoComplete:"off",form:E,initialValues:{speed:"slow"},children:[(0,g.jsx)(d.Z.Item,{label:t("sendmoney"),name:"amount",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsx)(u.Z,{})}),(0,g.jsx)(d.Z.Item,{label:t("sendspeed"),name:"speed",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(l.Z.Option,{value:"slow",children:t("slow")}),(0,g.jsx)(l.Z.Option,{value:"average",children:t("average")}),(0,g.jsx)(l.Z.Option,{value:"fast",children:t("fast")})]})}),(0,g.jsx)(d.Z.Item,{name:"chipkey",wrapperCol:{offset:k,span:16},valuePropName:"checked",rules:[{validator:(e,s)=>s?Promise.resolve():Promise.reject(new Error(`${t("Mcheck")}`))}],children:(0,g.jsx)(p.Z,{onChange:async e=>{1==e.target.checked?(async()=>{let e;window.indexedDB.open("sharesDB").onsuccess=function(t){if(e=t.target.result,e.objectStoreNames.contains("sharesList")){const t=e.transaction(["sharesList"]),s=t.objectStore("sharesList").index("username").get(C.userName);s.onerror=function(){console.log("\u4e8b\u52a1\u5931\u8d25")},s.onsuccess=function(e){const s=e.target.result;s?O(s.sharesname):F.error(`${t("Fnotfound")}`)}}}})():(async()=>{try{await o.W.post("/wallet/remove_share_1_from_cookie").then((e=>{200!=e.data.code?F.error(e.data.message):$(!1)}))}catch(e){console.log(e)}})()},children:t("McheckInfo")})}),(0,g.jsxs)(d.Z.Item,{wrapperCol:{offset:k,span:16},children:[(0,g.jsx)(m.ZP,{type:"primary",htmlType:"submit",loading:_[0],children:t("Submit")}),(0,g.jsx)(m.ZP,{htmlType:"reset",onClick:()=>{v((e=>{const t=[...e];return t[0]=!1,t}))},children:t("reset")})]})]})})}function j(e){const{t:t,i18n:s}=(0,n.$G)();let{operDialogClose:r,visiableClose:u,chain:x}=e;const{width:j,height:y}=(0,f.Z)(),[w,_]=(0,a.useState)([]),[v,k]=(0,a.useState)(5),[Z,C]=(0,i.o)(),[b,S]=(0,a.useState)(!1),{message:$,modal:F}=c.Z.useApp(),[N,I]=(0,a.useState)(!1),[D]=d.Z.useForm(),E=(e,s)=>{F.success({title:`${t("STransaction")}`,content:(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{onClick:()=>(e=>{window.open(Z.openUrl+e,"_blank")})(e),className:"get-href",children:t("clickquery")}),(0,g.jsxs)("p",{children:[t("EwaitingTime"),s]})]}),onOk(){}})},W=async e=>{try{const t=new FormData;t.append("encrypted_share_1",e),await o.W.post("/wallet/put_share_1_to_cookie",t).then((e=>{200!=e.data.code?$.error(e.data.message):S(!0)}))}catch(t){console.log(t)}};(0,a.useEffect)((()=>{I(u)}),[u]);let P=!1;return(0,a.useEffect)((()=>(async function(){P||(1==u&&(async()=>{try{await o.W.get("/wallet/check_share_1").then((e=>{200!=e.data.code?(S(!1),D.setFieldsValue({chipkey:""})):(S(!0),D.setFieldsValue({chipkey:"true"}))}))}catch(e){console.log(e)}})(),k(j>767?5:0))}(),()=>{P=!0})),[j,u]),(0,g.jsx)(h.Z,{title:t("closeachannel"),open:N,onCancel:()=>{r(!1)},footer:[],children:(0,g.jsxs)(d.Z,{name:"closeorder",labelCol:{span:5},wrapperCol:{span:16},style:{maxWidth:600},onFinish:async e=>{_((e=>{const t=[...e];return t[0]=!0,t})),e.chain=x;try{await o.W.post("/state/close_channel",e).then((e=>{_((e=>{const t=[...e];return t[0]=!1,t})),200!=e.data.code?$.error(e.data.message):(E(e.data.data.transaction_hash,e.data.data.estimated_confirmation_time),r(!1))}))}catch(s){_((e=>{const t=[...e];return t[0]=!1,t})),$.error(`${t("operationfailed")}`)}},onFinishFailed:e=>{},autoComplete:"off",form:D,initialValues:{speed:"slow"},children:[(0,g.jsx)(d.Z.Item,{label:t("sendspeed"),name:"speed",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(l.Z.Option,{value:"slow",children:t("slow")}),(0,g.jsx)(l.Z.Option,{value:"average",children:t("average")}),(0,g.jsx)(l.Z.Option,{value:"fast",children:t("fast")})]})}),(0,g.jsx)(d.Z.Item,{name:"chipkey",wrapperCol:{offset:v,span:16},valuePropName:"checked",rules:[{validator:(e,s)=>s?Promise.resolve():Promise.reject(new Error(`${t("Mcheck")}`))}],children:(0,g.jsx)(p.Z,{onChange:async e=>{1==e.target.checked?(async()=>{let e;window.indexedDB.open("sharesDB").onsuccess=function(t){if(e=t.target.result,e.objectStoreNames.contains("sharesList")){const t=e.transaction(["sharesList"]),s=t.objectStore("sharesList").index("username").get(Z.userName);s.onerror=function(){console.log("\u4e8b\u52a1\u5931\u8d25")},s.onsuccess=function(e){const s=e.target.result;s?W(s.sharesname):$.error(`${t("Fnotfound")}`)}}}})():(async()=>{try{await o.W.post("/wallet/remove_share_1_from_cookie").then((e=>{200!=e.data.code?$.error(e.data.message):S(!1)}))}catch(e){console.log(e)}})()},children:t("McheckInfo")})}),(0,g.jsxs)(d.Z.Item,{wrapperCol:{offset:v,span:16},children:[(0,g.jsx)(m.ZP,{type:"primary",htmlType:"submit",loading:w[0],children:t("Submit")}),(0,g.jsx)(m.ZP,{htmlType:"reset",onClick:()=>{_((e=>{const t=[...e];return t[0]=!1,t}))},children:t("reset")})]})]})})}function y(e){const{t:t,i18n:s}=(0,n.$G)();let{operDialogUpdate:r,visiableUpdate:u,chain:x}=e;const{width:j,height:y}=(0,f.Z)(),[w,_]=(0,a.useState)([]),[v,k]=(0,a.useState)(5),[Z,C]=(0,i.o)(),[b,S]=(0,a.useState)(!1),{message:$,modal:F}=c.Z.useApp(),[N,I]=(0,a.useState)(!1),[D]=d.Z.useForm(),E=(e,s)=>{F.success({title:`${t("STransaction")}`,content:(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{onClick:()=>(e=>{window.open(Z.openUrl+e,"_blank")})(e),className:"get-href",children:t("clickquery")}),(0,g.jsxs)("p",{children:[t("EwaitingTime"),s]})]}),onOk(){}})},W=async e=>{try{const t=new FormData;t.append("encrypted_share_1",e),await o.W.post("/wallet/put_share_1_to_cookie",t).then((e=>{200!=e.data.code?$.error(e.data.message):S(!0)}))}catch(t){console.log(t)}};(0,a.useEffect)((()=>{I(u)}),[u]);let P=!1;return(0,a.useEffect)((()=>(async function(){P||(1==u&&(async()=>{try{await o.W.get("/wallet/check_share_1").then((e=>{200!=e.data.code?(S(!1),D.setFieldsValue({chipkey:""})):(S(!0),D.setFieldsValue({chipkey:"true"}))}))}catch(e){console.log(e)}})(),k(j>767?5:0))}(),()=>{P=!0})),[j,u]),(0,g.jsx)(h.Z,{title:t("synchronizestate"),open:N,onCancel:()=>{r(!1)},footer:[],children:(0,g.jsxs)(d.Z,{name:"updateorder",labelCol:{span:5},wrapperCol:{span:16},style:{maxWidth:600},onFinish:async e=>{_((e=>{const t=[...e];return t[0]=!0,t})),e.chain=x;try{await o.W.post("/state/update_channel",e).then((e=>{_((e=>{const t=[...e];return t[0]=!1,t})),200!=e.data.code?$.error(e.data.message):(E(e.data.data.transaction_hash,e.data.data.estimated_confirmation_time),r(!1))}))}catch(s){_((e=>{const t=[...e];return t[0]=!1,t})),$.error(`${t("operationfailed")}`)}},onFinishFailed:e=>{},autoComplete:"off",form:D,initialValues:{speed:"slow"},children:[(0,g.jsx)(d.Z.Item,{label:t("sendspeed"),name:"speed",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(l.Z.Option,{value:"slow",children:t("slow")}),(0,g.jsx)(l.Z.Option,{value:"average",children:t("average")}),(0,g.jsx)(l.Z.Option,{value:"fast",children:t("fast")})]})}),(0,g.jsx)(d.Z.Item,{name:"chipkey",wrapperCol:{offset:v,span:16},valuePropName:"checked",rules:[{validator:(e,s)=>s?Promise.resolve():Promise.reject(new Error(`${t("Mcheck")}`))}],children:(0,g.jsx)(p.Z,{onChange:async e=>{1==e.target.checked?(async()=>{let e;window.indexedDB.open("sharesDB").onsuccess=function(t){if(e=t.target.result,e.objectStoreNames.contains("sharesList")){const t=e.transaction(["sharesList"]),s=t.objectStore("sharesList").index("username").get(Z.userName);s.onerror=function(){console.log("\u4e8b\u52a1\u5931\u8d25")},s.onsuccess=function(e){const s=e.target.result;s?W(s.sharesname):$.error(`${t("Fnotfound")}`)}}}})():(async()=>{try{await o.W.post("/wallet/remove_share_1_from_cookie").then((e=>{200!=e.data.code?$.error(e.data.message):S(!1)}))}catch(e){console.log(e)}})()},children:t("McheckInfo")})}),(0,g.jsxs)(d.Z.Item,{wrapperCol:{offset:v,span:16},children:[(0,g.jsx)(m.ZP,{type:"primary",htmlType:"submit",loading:w[0],children:t("Submit")}),(0,g.jsx)(m.ZP,{htmlType:"reset",onClick:()=>{_((e=>{const t=[...e];return t[0]=!1,t}))},children:t("reset")})]})]})})}function w(e){const{t:t,i18n:s}=(0,n.$G)();let{operDialogDaoClose:r,visiableDao:x,chain:j}=e;const{width:y,height:w}=(0,f.Z)(),[_,v]=(0,a.useState)([]),[k,Z]=(0,a.useState)(5),[C,b]=(0,i.o)(),[S,$]=(0,a.useState)(!1),{message:F,modal:N}=c.Z.useApp(),[I,D]=(0,a.useState)(!1),[E]=d.Z.useForm(),W=(e,s)=>{N.success({title:`${t("STransaction")}`,content:(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{onClick:()=>(e=>{window.open(C.openUrl+e,"_blank")})(e),className:"get-href",children:t("clickquery")}),(0,g.jsxs)("p",{children:[t("EwaitingTime"),s]})]}),onOk(){}})},P=async e=>{try{const t=new FormData;t.append("encrypted_share_1",e),await o.W.post("/wallet/put_share_1_to_cookie",t).then((e=>{200!=e.data.code?F.error(e.data.message):$(!0)}))}catch(t){console.log(t)}};(0,a.useEffect)((()=>{D(x)}),[x]);let q=!1;return(0,a.useEffect)((()=>(async function(){q||(1==x&&(async()=>{try{await o.W.get("/wallet/check_share_1").then((e=>{200!=e.data.code?($(!1),E.setFieldsValue({chipkey:""})):($(!0),E.setFieldsValue({chipkey:"true"}))}))}catch(e){console.log(e)}})(),Z(y>767?5:0))}(),()=>{q=!0})),[y,x]),(0,g.jsx)(h.Z,{title:t("CloseDAO"),open:I,onCancel:()=>{r(!1)},footer:[],children:(0,g.jsxs)(d.Z,{name:"closedaoorder",labelCol:{span:5},wrapperCol:{span:16},style:{maxWidth:600},onFinish:async e=>{v((e=>{const t=[...e];return t[0]=!0,t})),e.chain=j;try{await o.W.post("/state/close_channel_by_dao",e).then((e=>{v((e=>{const t=[...e];return t[0]=!1,t})),200!=e.data.code?F.error(e.data.message):(W(e.data.data.transaction_hash,e.data.data.estimated_confirmation_time),r(!1))}))}catch(s){v((e=>{const t=[...e];return t[0]=!1,t})),F.error(`${t("operationfailed")}`)}},onFinishFailed:e=>{},autoComplete:"off",form:E,initialValues:{speed:"slow"},children:[(0,g.jsx)(d.Z.Item,{label:t("participant"),name:"participant",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsx)(u.Z,{})}),(0,g.jsx)(d.Z.Item,{label:t("newBalance"),name:"newBalance",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsx)(u.Z,{})}),(0,g.jsx)(d.Z.Item,{label:t("voteId"),name:"voteId",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsx)(u.Z,{})}),(0,g.jsx)(d.Z.Item,{label:t("sendspeed"),name:"speed",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(l.Z.Option,{value:"slow",children:t("slow")}),(0,g.jsx)(l.Z.Option,{value:"average",children:t("average")}),(0,g.jsx)(l.Z.Option,{value:"fast",children:t("fast")})]})}),(0,g.jsx)(d.Z.Item,{name:"chipkey",wrapperCol:{offset:k,span:16},valuePropName:"checked",rules:[{validator:(e,s)=>s?Promise.resolve():Promise.reject(new Error(`${t("Mcheck")}`))}],children:(0,g.jsx)(p.Z,{onChange:async e=>{1==e.target.checked?(async()=>{let e;window.indexedDB.open("sharesDB").onsuccess=function(t){if(e=t.target.result,e.objectStoreNames.contains("sharesList")){const t=e.transaction(["sharesList"]),s=t.objectStore("sharesList").index("username").get(C.userName);s.onerror=function(){console.log("\u4e8b\u52a1\u5931\u8d25")},s.onsuccess=function(e){const s=e.target.result;s?P(s.sharesname):F.error(`${t("Fnotfound")}`)}}}})():(async()=>{try{await o.W.post("/wallet/remove_share_1_from_cookie").then((e=>{200!=e.data.code?F.error(e.data.message):$(!1)}))}catch(e){console.log(e)}})()},children:t("McheckInfo")})}),(0,g.jsxs)(d.Z.Item,{wrapperCol:{offset:k,span:16},children:[(0,g.jsx)(m.ZP,{type:"primary",htmlType:"submit",loading:_[0],children:t("Submit")}),(0,g.jsx)(m.ZP,{htmlType:"reset",onClick:()=>{v((e=>{const t=[...e];return t[0]=!1,t}))},children:t("reset")})]})]})})}function _(e){const{t:t,i18n:s}=(0,n.$G)();let{operDialogVote:r,visiableVote:x,chain:j}=e;const{width:y,height:w}=(0,f.Z)(),[_,v]=(0,a.useState)([]),[k,Z]=(0,a.useState)(5),[C,b]=(0,i.o)(),[S,$]=(0,a.useState)(!1),{message:F,modal:N}=c.Z.useApp(),[I,D]=(0,a.useState)(!1),[E]=d.Z.useForm(),W=(e,s)=>{N.success({title:`${t("STransaction")}`,content:(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{onClick:()=>(e=>{window.open(C.openUrl+e,"_blank")})(e),className:"get-href",children:t("clickquery")}),(0,g.jsxs)("p",{children:[t("EwaitingTime"),s]})]}),onOk(){}})},P=async e=>{try{const t=new FormData;t.append("encrypted_share_1",e),await o.W.post("/wallet/put_share_1_to_cookie",t).then((e=>{200!=e.data.code?F.error(e.data.message):$(!0)}))}catch(t){console.log(t)}};(0,a.useEffect)((()=>{D(x)}),[x]);let q=!1;return(0,a.useEffect)((()=>(async function(){q||(1==x&&(async()=>{try{await o.W.get("/wallet/check_share_1").then((e=>{200!=e.data.code?($(!1),E.setFieldsValue({chipkey:""})):($(!0),E.setFieldsValue({chipkey:"true"}))}))}catch(e){console.log(e)}})(),Z(y>767?5:0))}(),()=>{q=!0})),[y,x]),(0,g.jsx)(h.Z,{title:t("vote"),open:I,onCancel:()=>{r(!1)},footer:[],children:(0,g.jsxs)(d.Z,{name:"viteorder",labelCol:{span:5},wrapperCol:{span:16},style:{maxWidth:600},onFinish:async e=>{v((e=>{const t=[...e];return t[0]=!0,t})),e.chain=j,e.approve=!0;try{await o.W.post("/state/vote",e).then((e=>{v((e=>{const t=[...e];return t[0]=!1,t})),200!=e.data.code?F.error(e.data.message):(W(e.data.data.transaction_hash,e.data.data.estimated_confirmation_time),r(!1))}))}catch(s){v((e=>{const t=[...e];return t[0]=!1,t})),F.error(`${t("operationfailed")}`)}},onFinishFailed:e=>{},autoComplete:"off",form:E,initialValues:{speed:"slow"},children:[(0,g.jsx)(d.Z.Item,{label:t("voteId"),name:"voteId",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsx)(u.Z,{})}),(0,g.jsx)(d.Z.Item,{label:t("sendspeed"),name:"speed",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(l.Z.Option,{value:"slow",children:t("slow")}),(0,g.jsx)(l.Z.Option,{value:"average",children:t("average")}),(0,g.jsx)(l.Z.Option,{value:"fast",children:t("fast")})]})}),(0,g.jsx)(d.Z.Item,{name:"chipkey",wrapperCol:{offset:k,span:16},valuePropName:"checked",rules:[{validator:(e,s)=>s?Promise.resolve():Promise.reject(new Error(`${t("Mcheck")}`))}],children:(0,g.jsx)(p.Z,{onChange:async e=>{1==e.target.checked?(async()=>{let e;window.indexedDB.open("sharesDB").onsuccess=function(t){if(e=t.target.result,e.objectStoreNames.contains("sharesList")){const t=e.transaction(["sharesList"]),s=t.objectStore("sharesList").index("username").get(C.userName);s.onerror=function(){console.log("\u4e8b\u52a1\u5931\u8d25")},s.onsuccess=function(e){const s=e.target.result;s?P(s.sharesname):F.error(`${t("Fnotfound")}`)}}}})():(async()=>{try{await o.W.post("/wallet/remove_share_1_from_cookie").then((e=>{200!=e.data.code?F.error(e.data.message):$(!1)}))}catch(e){console.log(e)}})()},children:t("McheckInfo")})}),(0,g.jsxs)(d.Z.Item,{wrapperCol:{offset:k,span:16},children:[(0,g.jsx)(m.ZP,{type:"primary",htmlType:"submit",loading:_[0],children:t("Submit")}),(0,g.jsx)(m.ZP,{htmlType:"reset",onClick:()=>{v((e=>{const t=[...e];return t[0]=!1,t}))},children:t("reset")})]})]})})}function v(e){const{t:t,i18n:s}=(0,n.$G)();let{operDialogVoteClose:r,visiableVoteClose:u,chain:x}=e;const{width:j,height:y}=(0,f.Z)(),[w,_]=(0,a.useState)([]),[v,k]=(0,a.useState)(5),[Z,C]=(0,i.o)(),[b,S]=(0,a.useState)(!1),{message:$,modal:F}=c.Z.useApp(),[N,I]=(0,a.useState)(!1),[D]=d.Z.useForm(),E=(e,s)=>{F.success({title:`${t("STransaction")}`,content:(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{onClick:()=>(e=>{window.open(Z.openUrl+e,"_blank")})(e),className:"get-href",children:t("clickquery")}),(0,g.jsxs)("p",{children:[t("EwaitingTime"),s]})]}),onOk(){}})},W=async e=>{try{const t=new FormData;t.append("encrypted_share_1",e),await o.W.post("/wallet/put_share_1_to_cookie",t).then((e=>{200!=e.data.code?$.error(e.data.message):S(!0)}))}catch(t){console.log(t)}};(0,a.useEffect)((()=>{I(u)}),[u]);let P=!1;return(0,a.useEffect)((()=>(async function(){P||(1==u&&(async()=>{try{await o.W.get("/wallet/check_share_1").then((e=>{200!=e.data.code?(S(!1),D.setFieldsValue({chipkey:""})):(S(!0),D.setFieldsValue({chipkey:"true"}))}))}catch(e){console.log(e)}})(),k(j>767?5:0))}(),()=>{P=!0})),[j,u]),(0,g.jsx)(h.Z,{title:t("closeachannel"),open:N,onCancel:()=>{r(!1)},footer:[],children:(0,g.jsxs)(d.Z,{name:"closevoteorder",labelCol:{span:5},wrapperCol:{span:16},style:{maxWidth:600},onFinish:async e=>{_((e=>{const t=[...e];return t[0]=!0,t})),e.chain=x;try{await o.W.post("/state/start_vote_to_close_channel",e).then((e=>{_((e=>{const t=[...e];return t[0]=!1,t})),200!=e.data.code?$.error(e.data.message):(E(e.data.data.transaction_hash,e.data.data.estimated_confirmation_time),r(!1))}))}catch(s){_((e=>{const t=[...e];return t[0]=!1,t})),$.error(`${t("operationfailed")}`)}},onFinishFailed:e=>{},autoComplete:"off",form:D,initialValues:{speed:"slow"},children:[(0,g.jsx)(d.Z.Item,{label:t("sendspeed"),name:"speed",rules:[{required:!0,message:`${t("Required")}`}],children:(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(l.Z.Option,{value:"slow",children:t("slow")}),(0,g.jsx)(l.Z.Option,{value:"average",children:t("average")}),(0,g.jsx)(l.Z.Option,{value:"fast",children:t("fast")})]})}),(0,g.jsx)(d.Z.Item,{name:"chipkey",wrapperCol:{offset:v,span:16},valuePropName:"checked",rules:[{validator:(e,s)=>s?Promise.resolve():Promise.reject(new Error(`${t("Mcheck")}`))}],children:(0,g.jsx)(p.Z,{onChange:async e=>{1==e.target.checked?(async()=>{let e;window.indexedDB.open("sharesDB").onsuccess=function(t){if(e=t.target.result,e.objectStoreNames.contains("sharesList")){const t=e.transaction(["sharesList"]),s=t.objectStore("sharesList").index("username").get(Z.userName);s.onerror=function(){console.log("\u4e8b\u52a1\u5931\u8d25")},s.onsuccess=function(e){const s=e.target.result;s?W(s.sharesname):$.error(`${t("Fnotfound")}`)}}}})():(async()=>{try{await o.W.post("/wallet/remove_share_1_from_cookie").then((e=>{200!=e.data.code?$.error(e.data.message):S(!1)}))}catch(e){console.log(e)}})()},children:t("McheckInfo")})}),(0,g.jsxs)(d.Z.Item,{wrapperCol:{offset:v,span:16},children:[(0,g.jsx)(m.ZP,{type:"primary",htmlType:"submit",loading:w[0],children:t("Submit")}),(0,g.jsx)(m.ZP,{htmlType:"reset",onClick:()=>{_((e=>{const t=[...e];return t[0]=!1,t}))},children:t("reset")})]})]})})}const k=function(){const{t:e,i18n:t}=(0,n.$G)(),[s,d]=(0,a.useState)(0),[h,u]=(0,a.useState)(0),[p,m]=(0,a.useState)("ethereum_goerli"),[f,k]=(0,i.o)(),{message:Z}=c.Z.useApp(),[C,b]=(0,a.useState)(!1),[S,$]=(0,a.useState)(!1),[F,N]=(0,a.useState)(!1),[I,D]=(0,a.useState)(!1),[E,W]=(0,a.useState)(!1),[P,q]=(0,a.useState)(!1),O=(0,r.s0)(),V=t=>{f.userId?b(t):Z.error(`${e("ErrorUser")}`)},T=t=>{f.userId?$(t):Z.error(`${e("ErrorUser")}`)},L=t=>{f.userId?D(t):Z.error(`${e("ErrorUser")}`)},U=t=>{f.userId?W(t):Z.error(`${e("ErrorUser")}`)},B=t=>{f.userId?q(t):Z.error(`${e("ErrorUser")}`)},M=t=>{f.userId?N(t):Z.error(`${e("ErrorUser")}`)},R=async e=>{try{await o.W.get("/state/check_balances/"+e).then((e=>{200==e.data.code?d(e.data.data.balance):Z.error(e.data.message)}))}catch(t){console.log(t)}},A=async()=>{try{await o.W.get("/point_trade/get_user_assets").then((e=>{u((e=>{if(isNaN(e))return e;e=""+e;let t=(e=parseFloat(e)).toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/);return e.toFixed(Math.max(0,(t[1]||"").length-t[2]))})(e.data.assets[0].quantity))}))}catch(e){console.log(e)}};let G=!1;return(0,a.useEffect)((()=>(async function(){G||("1"==f.walletExist?(R(p),A()):O("/"))}(),()=>{G=!0})),[]),(0,g.jsxs)("div",{className:"index-content status-content",children:[(0,g.jsxs)("div",{className:"setting-item",children:[(0,g.jsx)("div",{className:"item-title",children:e("ChoiceLink")}),(0,g.jsx)("div",{className:"item-info",children:(0,g.jsx)(l.Z,{defaultValue:"Goerli",style:{width:140},onChange:e=>{R(e),m(e)},options:[{value:"ethereum_goerli",label:"Goerli"},{value:"ethereum_mainnet",label:"Ethereum"},{value:"linea_mainnet",label:"Linea"},{value:"polygon_mainnet",label:"Polygon"},{value:"optimism_mainnet",label:"Optimism"},{value:"scroll_sepolia",label:"Scroll sepolia"}]})})]}),(0,g.jsx)("div",{className:"setting-item",children:(0,g.jsxs)("div",{className:"item-title item-title-button",children:[(0,g.jsx)("div",{className:"peo-reg",onClick:()=>V(!0),children:e("openachannel")}),(0,g.jsx)("div",{className:"peo-reg",onClick:()=>T(!0),children:e("closeachannel")}),(0,g.jsx)("div",{className:"peo-reg",onClick:()=>M(!0),children:e("synchronizestate")})]})}),(0,g.jsx)("div",{className:"setting-item",children:(0,g.jsx)("div",{className:"item-title item-title-button",children:(0,g.jsx)("div",{className:"peo-reg",onClick:()=>L(!0),children:e("CloseDAO")})})}),(0,g.jsx)("div",{className:"setting-item",children:(0,g.jsxs)("div",{className:"item-title item-title-button",children:[(0,g.jsx)("div",{className:"peo-reg",onClick:()=>U(!0),children:e("vote")}),(0,g.jsx)("div",{className:"peo-reg",onClick:()=>B(!0),children:e("voteclose")})]})}),(0,g.jsxs)("div",{className:"setting-item",children:[(0,g.jsx)("div",{className:"item-title",children:e("platformpoints")}),(0,g.jsxs)("div",{className:"item-info",children:[h,"  point   ",(0,g.jsxs)("span",{onClick:()=>(async()=>{try{await o.W.post("/state/check_tx_status").then((t=>{200!=t.data.code?Z.error(t.data.message):(A(),R(p),Z.success(`${e("YesRefresh")}`))}))}catch(t){console.log(t)}})(),children:[" ",e("onerefresh")]})]})]}),(0,g.jsxs)("div",{className:"setting-item",children:[(0,g.jsx)("div",{className:"item-title",children:(0,g.jsx)("div",{className:"item-title-item",children:e("onchainpoints")})}),(0,g.jsxs)("div",{className:"item-info",children:[s," point  ",(0,g.jsxs)("span",{onClick:()=>(async()=>{A(),R(p),Z.success(`${e("YesRefresh")}`)})(),children:[" ",e("onerefresh")]})]})]}),(0,g.jsx)(x,{visiable:C,operDialogOpen:V,chain:p}),(0,g.jsx)(j,{visiableClose:S,operDialogClose:T,chain:p}),(0,g.jsx)(y,{visiableUpdate:F,operDialogUpdate:M,chain:p}),(0,g.jsx)(w,{visiableDao:I,operDialogDaoClose:L,chain:p}),(0,g.jsx)(_,{visiableVote:E,operDialogVote:U,chain:p}),(0,g.jsx)(v,{visiableVoteClose:P,operDialogVoteClose:B,chain:p})]})}}}]);
//# sourceMappingURL=476.a3def285.chunk.js.map